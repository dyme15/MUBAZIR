<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Donatur - Mubazir</title>

    <link href="assets/img/extra/logo-M.png" rel="icon">

    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/css/donatur.css" rel="stylesheet">
</head>

<body>
    <div class="d-flex">
        <nav id="sidebar" class="d-flex flex-column p-3 vh-100 position-fixed">
            <img class="sidebar-logo" src="assets/img/extra/LOGO MUBAZIR-LOMBA (1).png" alt="Logo Mubazir">
            <div class="user-info">
            <h5 id="namaSidebar">Donatur Default</h5>
            <small id="donaturEmail">email@donatur.com</small>
            </div>
            <ul class="nav nav-pills flex-column mb-auto">
                <li><a class="nav-link active" data-section="dashboard"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a></li>
                <li><a class="nav-link" data-section="buatDonasi"><i class="bi bi-plus-circle me-2"></i> Buat Donasi</a></li>
                <li><a class="nav-link" data-section="riwayat"><i class="bi bi-clock-history me-2"></i> Riwayat</a></li>
                <li><button id="logoutBtn" class="btn btn-outline-light mt-3 w-100"><i class="bi bi-box-arrow-right"></i> Logout</button></li>
            </ul>
        </nav>

        <div id="content" class="flex-grow-1">
            <nav class="navbar navbar-light shadow-sm">
                <div class="container-fluid d-flex align-items-center">
                    <button id="toggleSidebar" class="btn btn-outline-success me-3"><i class="bi bi-grid"></i></button>
                    <span class="ms-auto badge custom-green fs-6 shadow-sm"><i class="bi bi-people"></i> Donatur Mode</span>
                </div>
            </nav>

            <div class="container my-4">
                <div id="dashboard" class="page-section active">
                    <div class="card p-4 mb-4">
                        <h3>Selamat Datang, <span id="namaDashboard">Donatur!</span></h3>
                        <p class="text-muted">Berikut progres Anda berdasarkan 6 kriteria utama ðŸŒ±</p>
                        <div class="row g-4 mt-2" id="dashboardCards">
                        </div>
                    </div>
                </div>

                <div id="buatDonasi" class="page-section">
  <div class="card p-4">
    <h4>Buat Donasi Baru</h4>
    <form id="formDonasi" class="row g-3 mt-2">
      <div class="col-md-12">
        <label class="form-label">Kategori Donasi</label>
        <select id="kategoriDonasi" class="form-select" required>
          <option value="" disabled selected>-- Pilih Kategori --</option>
          <option value="makanan">Makanan</option>
          <option value="snack">Snack & Roti</option>
          <option value="minuman">Minuman</option>
          <option value="buah">Buah & Hidangan Penutup</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Nama Donasi</label>
        <input id="namaDonasi" type="text" class="form-control" placeholder="Contoh: Nasi Kotak 5 porsi" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Jumlah</label>
        <input id="jumlahDonasi" type="number" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Satuan</label>
        <select id="satuanDonasi" class="form-select">
          <option>Porsi</option>
          <option>Buah</option>
          <option>Botol</option>
        </select>
      </div>
      <div class="col-md-12">
        <label class="form-label">Masa Kadaluarsa</label>
        <select id="masaKadaluarsa" class="form-select" required>
          <option value="" disabled selected>-- Pilih Waktu Kadaluarsa --</option>
          <option value="1">1 Jam</option>
          <option value="2">2 Jam</option>
          <option value="3">3 Jam</option>
          <option value="4">4 Jam</option>
          <option value="5">5 Jam</option>
        </select>
      </div>
      <div class="col-md-12">
        <label class="form-label">Lokasi Penjemputan</label>
        <input id="lokasi" type="text" class="form-control mb-2" placeholder="Masukkan alamat penjemputan donasi (Misal: Jl. Utama No. 12, Medan)" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Upload Foto</label>
        <input type="file" class="form-control" id="fotoDonasi">
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-success">Buat Donasi</button>
      </div>
    </form>
  </div>
</div>

                    <div id="hasilDonasi" class="card p-4 mt-4 d-none">
                        <div class="alert alert-success text-center" role="alert">
                            <h5 class="alert-heading">âœ… Donasi Berhasil Diunggah!</h5>
                            <p>Terima kasih telah mengupload. Donasi akan ditinjau terlebih dahulu oleh admin dalam waktu singkat.</p>
                            <hr>
                            <p class="mb-0 small">Mohon pastikan makanan dalam kondisi siap dikonsumsi.</p>
                        </div>
                        <h5>Detail Donasi Anda:</h5>
                        <p><strong>Kategori:</strong> <span id="hasilKategori"></span></p>
                        <p><strong>Nama Donasi:</strong> <span id="hasilNama"></span></p>
                        <p><strong>Jumlah:</strong> <span id="hasilJumlah"></span></p>
                        <p><strong>Kadaluarsa:</strong> <span id="hasilKadaluarsa"></span></p>
                        <p><strong>Lokasi:</strong> <span id="hasilLokasi"></span></p>
                        
                       <!-- Tombol Scan QR di hasilDonasi -->
                        <button id="scanBtn" class="btn btn-outline-primary mt-2 d-none">
                            <i class="bi bi-upload"></i> Scan Kode Penyalur
                        </button>

                        <input type="file" id="qrFileInput" accept=".txt, .json, .png" style="display: none;">

                        <div id="scanResult" class="mt-3 alert alert-info d-none">
                            Unggah file untuk simulasi kode QR penyalur.
                        </div>
                    </div>
                </div>

                <div id="riwayat" class="page-section">
                    <div class="card p-4">
                        <h4>Riwayat Donasi Saya</h4>
                        <table class="table table-hover mt-3">
                            <thead>
                                <tr>
                                    <th>Nama Donasi</th>
                                    <th>Jumlah</th>
                                    <th>Lokasi</th>
                                    <th>Status</th>
                                    <th>Bukti Terima</th>
                                </tr>
                            </thead>
                            <tbody id="riwayatTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <div class="modal fade" id="buktiTerimaModal" tabindex="-1" aria-labelledby="buktiTerimaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="buktiTerimaModalLabel">Bukti Terima Donasi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="modalBuktiImage" src="" class="img-fluid rounded" alt="Bukti Terima" style="max-height: 80vh;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script type="module" src="assets/js/donatur.js"></script>

</body>

</html>
